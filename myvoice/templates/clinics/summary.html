{% extends "base.html" %}

{% load static from staticfiles %}

{% block title %}{{ object.name }} {{ object.get_type_display }} Summary Feedback Report{% endblock title %}

{% block content %}
  <div class="container main-header">
    <div class="col-xs-9 no-padding-left">
      <h1>
        <span style="font-weight: 700;">{{ object.name }} {{ object.get_type_display }}</span><br />
         Summary Feedback Report
      </h1>

      <div class="lead">The following document was generated through the
      ICT4SA program, intended to provide trial period reporting to selected
      NSHIP PBF staff. The following data was collected through SMS surveys of
      patients in 11 {{ object.name }} {{ object.get_type_display }} PBF
      Integrated Clinics and some additional community members.</div>
    </div>
  </div><!-- /.container -->

  <div id="feedback-on-services" class="container">
    <div class="col-xs-12 section-heading">
      <h2>FEEDBACK ON SERVICES</h2>
    </div>

    <p>Number of patients with this service who reported this feedback.</p>

    <table class="table table-bordered table-striped">
      <thead>
        <tr>
            <th class="special-th"><select id="service-feedback-weeks"><option>{{ min_date|date:"F j, Y" }} - {{ max_date|date:"F j, Y" }}</option></select></th>
          <th>Open Facility</th>
          <th>Respectful<br>Staff Treatment</th>
          <th>Clean<br>Hospital Materials</th>
          <th>Charged Fairly</th>
          <th>Most Common<br>Wait Time (hrs)</th>
        </tr>
      </thead>
      
      <tbody>
        {% for service, service_data in feedback_by_service %}
        <tr>
            <td>{{ service.name }}</td>
            {% for result, total_respondents in service_data %}
            {% if result == None %}
              <td>N/A (0)</td>
            {% else %}
              <td>{{ result }} ({{ total_respondents }})</td>
            {% endif %}
            {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div><!-- / #feedback-on-services .container -->

  <div id="feedback-facility" class="container">
    <div class="col-xs-12 section-heading">
      <h2>FEEDBACK REPORTED BY FACILITY</h2>
    </div>

    <p>Number of patients with this service who reported this feedback.</p>

    <table class="table table-bordered table-striped">
      <thead>
        <tr>
            <th class="special-th"><select id="facility-feedback-weeks"><option>{{ min_date|date:"F j, Y" }} - {{ max_date|date:"F j, Y" }}</option></select></th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Feedback<br>Participation
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Patient<br>Satisfaction
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Quality<br>(Score, Q1)
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Quantity<br>(Score, Q1)
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Open<br>Facility
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Respectful<br>Staff Treatment
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Clean<br>Hospital Materials
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Charged<br>Fairly
          </th>
          <th>
            <div class="green-question-dot" data-toggle="popover" data-placement="bottom" data-content="This response was generated by using key satisfaction indicators based on customer responses in SMS survey.">?
            </div>
            Most<br>Common<br>Wait Time<br>(hrs)
          </th>
        </tr>
      </thead>
      <tbody>
      {% for clinic, clinic_data in feedback_by_clinic %}
        <tr>
            <td>{{ clinic }}</td>
            {% for result, total_respondents in clinic_data %}
            {% if result == None %}
              <td>N/A (0)</td>
            {% else %}
              <td>{{ result }} ({{ total_respondents }})</td>
            {% endif %}
            {% endfor %}
        </tr>
      {% endfor %}

      </tbody>
    </table>
  </div><!-- / #feedback-facility .container -->
{% endblock content %}
